"use strict";
function formatFee(cents) {
    return (cents / 100).toFixed(2);
}
Page({
    timer: undefined,
    tripID: '',
    data: {
        location: {
            latitude: 30,
            longitude: 120,
        },
        scale: 12,
        elapsed: '00:00:00',
        fee: '0.00',
        markers: [
            {
                iconPath: "/resources/car.png",
                id: 0,
                latitude: 30,
                longitude: 120,
                width: 20,
                height: 20,
            },
        ],
    },
    onLoad: function (opt) {
        console.log(opt);
        this.setupLocationUpdator();
        this.setupTimer();
    },
    setupLocationUpdator: function () {
        var _this = this;
        wx.startLocationUpdate({
            fail: console.error,
        });
        wx.onLocationChange(function (loc) {
            _this.setData({
                location: {
                    latitude: loc.latitude,
                    longitude: loc.longitude,
                },
            });
        });
    },
    setupTimer: function () {
        var _this = this;
        var elapsedSec = 0;
        this.timer = setInterval(function () {
            elapsedSec++;
            _this.setData({
                elapsed: "\u82B1\u4E86 " + elapsedSec + " \u5143",
                fee: formatFee(elapsedSec),
            });
        }, 1000);
    },
    onUnload: function () {
        wx.stopLocationUpdate();
        if (this.timer) {
            clearInterval(this.timer);
        }
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJpdmluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRyaXZpbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQW1CQSxTQUFTLFNBQVMsQ0FBQyxLQUFhO0lBQzVCLE9BQU8sQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ25DLENBQUM7QUFFRCxJQUFJLENBQUM7SUFDRCxLQUFLLEVBQUUsU0FBNkI7SUFDcEMsTUFBTSxFQUFFLEVBQUU7SUFFVixJQUFJLEVBQUU7UUFDSixRQUFRLEVBQUU7WUFDUixRQUFRLEVBQUUsRUFBRTtZQUNaLFNBQVMsRUFBRSxHQUFHO1NBQ2Y7UUFDRCxLQUFLLEVBQUUsRUFBRTtRQUNULE9BQU8sRUFBRSxVQUFVO1FBQ25CLEdBQUcsRUFBRSxNQUFNO1FBQ1gsT0FBTyxFQUFFO1lBQ1A7Z0JBQ0UsUUFBUSxFQUFFLG9CQUFvQjtnQkFDOUIsRUFBRSxFQUFFLENBQUM7Z0JBQ0wsUUFBUSxFQUFFLEVBQUU7Z0JBQ1osU0FBUyxFQUFFLEdBQUc7Z0JBQ2QsS0FBSyxFQUFFLEVBQUU7Z0JBQ1QsTUFBTSxFQUFFLEVBQUU7YUFDWDtTQUNGO0tBQ0Y7SUFFRCxNQUFNLEVBQU4sVUFBUSxHQUE4QjtRQUNsQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRWpCLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFBO1FBQzNCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQTtJQUNyQixDQUFDO0lBRUQsb0JBQW9CO1FBQXBCLGlCQWFDO1FBWkMsRUFBRSxDQUFDLG1CQUFtQixDQUFDO1lBQ25CLElBQUksRUFBRSxPQUFPLENBQUMsS0FBSztTQUN0QixDQUFDLENBQUE7UUFFRixFQUFFLENBQUMsZ0JBQWdCLENBQUMsVUFBQSxHQUFHO1lBQ25CLEtBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQ1QsUUFBUSxFQUFFO29CQUNOLFFBQVEsRUFBRSxHQUFHLENBQUMsUUFBUTtvQkFDdEIsU0FBUyxFQUFFLEdBQUcsQ0FBQyxTQUFTO2lCQUMzQjthQUNKLENBQUMsQ0FBQTtRQUNOLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVELFVBQVU7UUFBVixpQkFTQztRQVJHLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQTtRQUNsQixJQUFJLENBQUMsS0FBSyxHQUFHLFdBQVcsQ0FBQztZQUNyQixVQUFVLEVBQUUsQ0FBQTtZQUNaLEtBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQ1QsT0FBTyxFQUFFLGtCQUFNLFVBQVUsWUFBSTtnQkFDN0IsR0FBRyxFQUFFLFNBQVMsQ0FBQyxVQUFVLENBQUM7YUFDN0IsQ0FBQyxDQUFBO1FBQ04sQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFBO0lBQ1osQ0FBQztJQUVELFFBQVE7UUFDSixFQUFFLENBQUMsa0JBQWtCLEVBQUUsQ0FBQTtRQUN2QixJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDWixhQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO1NBQzVCO0lBQ0wsQ0FBQztDQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCB7IHJvdXRpbmcgfSBmcm9tIFwiLi4vLi4vdXRpbHMvcm91dGluZ1wiXG5cbi8vIGZ1bmN0aW9uIHBhZFN0cmluZyhuOiBudW1iZXIpIHtcbi8vICAgICByZXR1cm4gbiA8IDEwID8gJzAnK24udG9GaXhlZCgwKSA6IG4udG9GaXhlZCgwKVxuLy8gfVxuXG4vLyBmdW5jdGlvbiBmb3JtYXREdXJhdGlvbihzZWM6IG51bWJlcikge1xuLy8gICAgIGNvbnN0IGggPSBNYXRoLmZsb29yKHNlYy8zNjAwKVxuLy8gICAgIHNlYyAtPSAzNjAwICogaFxuLy8gICAgIGNvbnN0IG0gPSBNYXRoLmZsb29yKHNlYyAvIDYwKVxuLy8gICAgIHNlYyAtPSA2MCAqIG1cbi8vICAgICBjb25zdCBzID0gTWF0aC5mbG9vcihzZWMpXG4vLyAgICAgcmV0dXJuIHtcbi8vICAgICAgICAgaGg6IHBhZFN0cmluZyhoKSxcbi8vICAgICAgICAgbW06IHBhZFN0cmluZyhtKSxcbi8vICAgICAgICAgc3M6IHBhZFN0cmluZyhzKSxcbi8vICAgICB9XG4vLyB9XG5cbmZ1bmN0aW9uIGZvcm1hdEZlZShjZW50czogbnVtYmVyKSB7XG4gICAgcmV0dXJuIChjZW50cyAvIDEwMCkudG9GaXhlZCgyKVxufVxuXG5QYWdlKHtcbiAgICB0aW1lcjogdW5kZWZpbmVkIGFzIG51bWJlcnx1bmRlZmluZWQsXG4gICAgdHJpcElEOiAnJyxcblxuICAgIGRhdGE6IHtcbiAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgIGxhdGl0dWRlOiAzMCxcbiAgICAgICAgbG9uZ2l0dWRlOiAxMjAsXG4gICAgICB9LFxuICAgICAgc2NhbGU6IDEyLFxuICAgICAgZWxhcHNlZDogJzAwOjAwOjAwJyxcbiAgICAgIGZlZTogJzAuMDAnLFxuICAgICAgbWFya2VyczogW1xuICAgICAgICB7XG4gICAgICAgICAgaWNvblBhdGg6IFwiL3Jlc291cmNlcy9jYXIucG5nXCIsXG4gICAgICAgICAgaWQ6IDAsXG4gICAgICAgICAgbGF0aXR1ZGU6IDMwLFxuICAgICAgICAgIGxvbmdpdHVkZTogMTIwLFxuICAgICAgICAgIHdpZHRoOiAyMCxcbiAgICAgICAgICBoZWlnaHQ6IDIwLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9LFxuXG4gICAgb25Mb2FkIChvcHQ6IFJlY29yZDxcInRyaXBfaWRcIiwgc3RyaW5nPikge1xuICAgICAgICBjb25zb2xlLmxvZyhvcHQpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXR1cExvY2F0aW9uVXBkYXRvcigpXG4gICAgICAgIHRoaXMuc2V0dXBUaW1lcigpXG4gICAgfSxcbiAgXG4gICAgc2V0dXBMb2NhdGlvblVwZGF0b3IoKSB7XG4gICAgICB3eC5zdGFydExvY2F0aW9uVXBkYXRlKHtcbiAgICAgICAgICBmYWlsOiBjb25zb2xlLmVycm9yLFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgd3gub25Mb2NhdGlvbkNoYW5nZShsb2MgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICAgICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgICBsYXRpdHVkZTogbG9jLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBsb2MubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0sXG5cbiAgICBzZXR1cFRpbWVyKCkge1xuICAgICAgICBsZXQgZWxhcHNlZFNlYyA9IDBcbiAgICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIGVsYXBzZWRTZWMrK1xuICAgICAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICAgICAgICBlbGFwc2VkOiBg6Iqx5LqGICR7ZWxhcHNlZFNlY30g5YWDYCxcbiAgICAgICAgICAgICAgICBmZWU6IGZvcm1hdEZlZShlbGFwc2VkU2VjKSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sIDEwMDApXG4gICAgfSxcblxuICAgIG9uVW5sb2FkKCkge1xuICAgICAgICB3eC5zdG9wTG9jYXRpb25VcGRhdGUoKVxuICAgICAgICBpZiAodGhpcy50aW1lcikge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKVxuICAgICAgICB9XG4gICAgfSxcbn0pIl19